---
title: "R Notebook"
output:
  html_document:
    df_print: paged
---

From [538 Riddler](https://fivethirtyeight.com/features/can-you-find-the-best-dungeons-dragons-strategy/)

> The fifth edition of Dungeons & Dragons introduced a system
> of “advantage and disadvantage.” When you roll a die “with
> advantage,” you roll the die twice and keep the higher result. Rolling
> “with disadvantage” is similar, except you keep the lower result
> instead. The rules further specify that when a player rolls with both
> advantage and disadvantage, they cancel out, and the player rolls a
> single die. Yawn!
> 
> There are two other, more mathematically interesting ways that advantage
> and disadvantage could be combined. First, you could have “advantage of
> disadvantage,” meaning you roll twice with disadvantage and then keep
> the higher result. Or, you could have “disadvantage of advantage,”
> meaning you roll twice with advantage and then keep the lower result. With
> a fair 20-sided die, which situation produces the highest expected
> roll: advantage of disadvantage, disadvantage of advantage or rolling
> a single die?
> 
> Extra Credit: Instead of maximizing your expected roll, suppose you
> need to roll N or better with your 20-sided die. For each value of N,
> is it better to use advantage of disadvantage, disadvantage of advantage
> or rolling a single die?

I'll start with the basics: rolling a single die, rolling with advantage, rolling with disadvantage.
```{r}
N <- 100000
roll1 <- sample(1:20, N, replace=T)
roll2 <- sample(1:20, N, replace=T)
rolls <- data.frame(single=roll1, advantage=pmax(roll1, roll2), disadvantage=pmin(roll1, roll2))
summary(rolls)
```

The mean of the single roll is close to the expected 10.5. I'm not sure what I expect for advantage and disadvantage rolls, beyond the simple intuition that they are better/worse than a single roll, and that checks out here, with about 13.8 for advantage, 7.2 for disadvantage.

How about a visualization?
```{r}
library(reshape2)
r <- melt(rolls)
names(r) <- c("type", "roll")
library(ggplot2)
ggplot(r, aes(x=type, y=roll)) + geom_jitter(alpha=0.01, width=0.2)
```

I guess that's pretty, but maybe it's not telling me too much. A histogram is more useful.
```{r}
p <- ggplot(r, aes(roll, fill=type)) + geom_bar()
p + facet_grid(. ~ type)
```
